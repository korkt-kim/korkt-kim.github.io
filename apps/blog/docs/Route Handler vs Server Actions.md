# API 경로와 서버 액션 비교

API 경로와 서버 작업은 유사한 사용 사례에 사용할 수 있습니다.

요약: 데이터를 가져올 때는 API 경로를 사용하고, 작업/변형을 수행할 때는 서버 작업을 사용합니다.

## Route Handler

API 라우트는 서버 액션보다 더 일반적이고 낮은 수준의 추상화입니다. 클라이언트 측에서 호출할 수 있는 서버 측 코드를 작성하는 방법입니다. REST API를 노출하거나 클라이언트 측에서 호출할 수 있는 서버 측 코드를 작성하는 데 좋은 방법입니다.

API 경로의 단점은 직접 사용할 수 있는 Fetch API를 사용하거나 React Query 또는 SWR과 같은 라이브러리를 통해 호출해야 한다는 것입니다. 이 키트에서는 SWR을 사용합니다.

일반적으로 액션/변형을 수행하기보다는 데이터를 가져올 때 API 라우트를 사용하는 것이 좋습니다.

## Server Action

API 경로와 달리 서버 액션은 더 높은 수준의 추상화입니다. 서버 액션은 클라이언트 측에서 POST??????? 요청으로 호출할 수 있는 서버 측 코드를 작성하는 방법입니다.

새 사용자를 만들거나 사용자 프로필을 업데이트하는 등 서버 측에서 작업/변경을 수행하려는 경우에 특히 유용합니다.

재검증 경로 및 재검증 태그와 같은 유틸리티 덕분에 서버 작업을 사용하여 특정 페이지 또는 태그의 캐시를 무효화할 수도 있습니다(가져오기와 함께 사용).

대부분의 서비스는 NestJS, Spring boot, Django등과 같은 백엔드 프레임워크를 사용해 RESTful 한 백엔드 서비스가 구현되어 있기 때문에 Route Handlers의 활용성이 크게 와닿지 않을 것입니다. (저 또한 그렇고요..)
만약 1인 개발자이고, 서비스의 규모가 작고, 추후에 기능이 추가되거나 변경될 가능성이 없고, 별도의 백엔드를 구현하고 싶지 않을 때라는 조건이 모두 성립되면 Route Handler를 사용해 Isomorphic 한 Web API를 구축하는 것도 좋은 방법이라고 생각합니다.
실제 서비스를 개발하면서 NextJS의 Route Handler기능을 사용한 사례는 다음과 같습니다:

next auth를 사용한 인증 관리
백엔드 지원 없이 외부 API를 숨기고 싶을때
백엔드 지원 없이 임시로 CORS 문제를 해결해야 될 때

여러 경로를 통해 조사를 해봤지만 Route Handler에 대한 고도화된 활용사례는 없는 듯싶습니다. Route Handler를 이용한 대규모 서비스사례가 있다면 어떻게 구성했는지 궁금 하긴 하네요. 혹시 대규모 서비스에 적용한 사례를 알고 있다면 공유 부탁드립니다! 🙇🏻‍♂️
